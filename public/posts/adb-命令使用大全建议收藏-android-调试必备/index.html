<!doctype html>
<html lang="zh-cn">
  <head>
    <title>ADB å‘½ä»¤ä½¿ç”¨å¤§å…¨ï¼ˆå»ºè®®æ”¶è—ï¼‰ Android è°ƒè¯•å¿…å¤‡ // CYRUS STUDIO</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.131.0">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <meta name="keywords" content="CYRUS STUDIO, å®‰å“é€†å‘, Android Reverse Engineering, ç§»åŠ¨å¼€å‘, å®‰å“å¼€å‘, Python">
    <meta name="robots" content="index, follow">
    <link rel="stylesheet" href="/blog/css/main.min.d970c1dc93ec518baa03345e73aafb7a5a0879e5830ca966a23c6d3552430ab1.css" />
    

    
  


    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="ADB å‘½ä»¤ä½¿ç”¨å¤§å…¨ï¼ˆå»ºè®®æ”¶è—ï¼‰ Android è°ƒè¯•å¿…å¤‡">
  <meta name="twitter:description" content="ç‰ˆæƒå½’ä½œè€…æ‰€æœ‰ï¼Œå¦‚æœ‰è½¬å‘ï¼Œè¯·æ³¨æ˜æ–‡ç« å‡ºå¤„ï¼šhttps://cyrus-studio.github.io/blog/
åŸºç¡€adbå‘½ä»¤ # é‡å¯adb adb kill-server# æŸ¥çœ‹å·²è¿æ¥çš„è®¾å¤‡adb devices# è¿›å…¥å‘½ä»¤è¡Œadb shell# ä½¿ç”¨ -s å‚æ•°æ¥æŒ‡å®šè®¾å¤‡adb -s &lt;è®¾å¤‡åºåˆ—å·&gt; shell# æ˜¾ç¤ºæ—¥å¿—adb logcat è·å– API Level è¿›å…¥ adb shell ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤è·å–å½“å‰ Android ç³»ç»Ÿçš„ API Levelï¼ˆå³ SDK ç‰ˆæœ¬ï¼‰ï¼š
getprop ro.build.version.sdk ä»¥ä¸‹æ˜¯ Android ç‰ˆæœ¬ä¸ API Level çš„å¯¹åº”è¡¨ ï¼ˆæˆªè‡³ Android 15ï¼‰ï¼š
Android ç‰ˆæœ¬ API Level ä»£å· å‘å¸ƒæ—¶é—´ Android 15 35 Vanilla Ice Cream 2024å¹´9æœˆ Android 14 34 Upside Down Cake 2023å¹´10æœˆ Android 13 33 Tiramisu 2022å¹´8æœˆ Android 12L 32 2022å¹´3æœˆ Android 12 31 Snow Cone 2021å¹´10æœˆ Android 11 30 Red Velvet Cake 2020å¹´9æœˆ Android 10 29 Q 2019å¹´9æœˆ Android 9 28 Pie 2018å¹´8æœˆ Android 8.">

    <meta property="og:url" content="https://cyrus-studio.github.io/blog/posts/adb-%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E5%A4%A7%E5%85%A8%E5%BB%BA%E8%AE%AE%E6%94%B6%E8%97%8F-android-%E8%B0%83%E8%AF%95%E5%BF%85%E5%A4%87/">
  <meta property="og:site_name" content="CYRUS STUDIO">
  <meta property="og:title" content="ADB å‘½ä»¤ä½¿ç”¨å¤§å…¨ï¼ˆå»ºè®®æ”¶è—ï¼‰ Android è°ƒè¯•å¿…å¤‡">
  <meta property="og:description" content="ç‰ˆæƒå½’ä½œè€…æ‰€æœ‰ï¼Œå¦‚æœ‰è½¬å‘ï¼Œè¯·æ³¨æ˜æ–‡ç« å‡ºå¤„ï¼šhttps://cyrus-studio.github.io/blog/
åŸºç¡€adbå‘½ä»¤ # é‡å¯adb adb kill-server# æŸ¥çœ‹å·²è¿æ¥çš„è®¾å¤‡adb devices# è¿›å…¥å‘½ä»¤è¡Œadb shell# ä½¿ç”¨ -s å‚æ•°æ¥æŒ‡å®šè®¾å¤‡adb -s &lt;è®¾å¤‡åºåˆ—å·&gt; shell# æ˜¾ç¤ºæ—¥å¿—adb logcat è·å– API Level è¿›å…¥ adb shell ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤è·å–å½“å‰ Android ç³»ç»Ÿçš„ API Levelï¼ˆå³ SDK ç‰ˆæœ¬ï¼‰ï¼š
getprop ro.build.version.sdk ä»¥ä¸‹æ˜¯ Android ç‰ˆæœ¬ä¸ API Level çš„å¯¹åº”è¡¨ ï¼ˆæˆªè‡³ Android 15ï¼‰ï¼š
Android ç‰ˆæœ¬ API Level ä»£å· å‘å¸ƒæ—¶é—´ Android 15 35 Vanilla Ice Cream 2024å¹´9æœˆ Android 14 34 Upside Down Cake 2023å¹´10æœˆ Android 13 33 Tiramisu 2022å¹´8æœˆ Android 12L 32 2022å¹´3æœˆ Android 12 31 Snow Cone 2021å¹´10æœˆ Android 11 30 Red Velvet Cake 2020å¹´9æœˆ Android 10 29 Q 2019å¹´9æœˆ Android 9 28 Pie 2018å¹´8æœˆ Android 8.">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-06-22T14:12:55+08:00">
    <meta property="article:modified_time" content="2025-06-22T14:12:55+08:00">


  </head>
  <body>
    <header class="app-header">
      <a href="https://cyrus-studio.github.io/blog/"><img class="app-header-avatar" src="/blog/avatar.jpg" alt="John Doe" /></a>
      <span class="app-header-title">CYRUS STUDIO</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/blog/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/blog/about/">About</a>
             - 
          
          <a class="app-header-menu-item" href="https://github.com/CYRUS-STUDIO">GitHub</a>
      </nav>
      <p>å…¬ä¼—å·ï¼šCYRUS STUDIO</p>
      

      <div class="qrcode-container">
          <img src="/blog/gongzhonghao.jpg" alt="å…¬ä¼—å·äºŒç»´ç " class="qrcode-image">
          <p class="qrcode-text">æ‰«ç å…³æ³¨å…¬ä¼—å·</p>
      </div>

      <div class="visitor-counter">               
        
        <div id="pageview-wrapper" style="display: none; margin-top: 1rem; font-size: 0.9rem; color: #888;">
          ğŸ‘€ è®¿é—®æ¬¡æ•°ï¼š<span class="waline-pageview-count" data-path="/">0</span>
        </div>
      </div>

      <script type="module">
        import { pageviewCount } from 'https://unpkg.com/@waline/client@v3/dist/pageview.js';

        
        pageviewCount({
          serverURL: 'https://waline-15wtwfoa7-cyrus-studios-projects.vercel.app',
          path: '/',
          update: true
        });

        
        setTimeout(() => {
          const el = document.querySelector('.waline-pageview-count[data-path="/"]');
          const count = el?.innerText?.trim();
          if (count && count !== '0') {
            document.getElementById('pageview-wrapper').style.display = 'block';
          }
        }, 2000);
      </script>

    </header>
    <main class="app-container">
      
<article class="post">
  <header class="post-header">
    <meta charset="UTF-8"/>
    <h1 class="post-title">ADB å‘½ä»¤ä½¿ç”¨å¤§å…¨ï¼ˆå»ºè®®æ”¶è—ï¼‰ Android è°ƒè¯•å¿…å¤‡</h1>
    <div class="post-meta" style="display: flex; gap: 1em; flex-wrap: wrap; align-items: center;">
      <div>
        <span class="meta-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-eye">
  <title>eye</title>
  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>
</svg>
          é˜…è¯»é‡: <span class="waline-pageview-count" data-path="/blog/posts/adb-%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E5%A4%A7%E5%85%A8%E5%BB%BA%E8%AE%AE%E6%94%B6%E8%97%8F-android-%E8%B0%83%E8%AF%95%E5%BF%85%E5%A4%87/"></span>
        </span>
      </div>
      <div>
        <span class="meta-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Jun 22, 2025
        </span>
      </div>
      <div>
        <span class="meta-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          4 min read
        </span>
      </div>
    </div>

    <link
      rel="stylesheet"
      href="https://unpkg.com/@waline/client@v3/dist/waline.css"
    />

    <link rel="stylesheet" href="/blog/css/waline-custom.css">

  </header>
  <div class="post-content">
    <blockquote>
<p>ç‰ˆæƒå½’ä½œè€…æ‰€æœ‰ï¼Œå¦‚æœ‰è½¬å‘ï¼Œè¯·æ³¨æ˜æ–‡ç« å‡ºå¤„ï¼š<a href="https://cyrus-studio.github.io/blog/">https://cyrus-studio.github.io/blog/</a></p>
</blockquote>
<h1 id="åŸºç¡€adbå‘½ä»¤">åŸºç¡€adbå‘½ä»¤</h1>
<pre tabindex="0"><code># é‡å¯adb 
adb kill-server

# æŸ¥çœ‹å·²è¿æ¥çš„è®¾å¤‡
adb devices

# è¿›å…¥å‘½ä»¤è¡Œ
adb shell

# ä½¿ç”¨ -s å‚æ•°æ¥æŒ‡å®šè®¾å¤‡
adb -s &lt;è®¾å¤‡åºåˆ—å·&gt; shell

# æ˜¾ç¤ºæ—¥å¿—
adb logcat
</code></pre><h1 id="è·å–-api-level">è·å– API Level</h1>
<p>è¿›å…¥ adb shell ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤è·å–å½“å‰ Android ç³»ç»Ÿçš„ API Levelï¼ˆå³ SDK ç‰ˆæœ¬ï¼‰ï¼š</p>
<pre tabindex="0"><code>getprop ro.build.version.sdk
</code></pre><p>ä»¥ä¸‹æ˜¯ <strong>Android ç‰ˆæœ¬ä¸ API Level çš„å¯¹åº”è¡¨</strong> ï¼ˆæˆªè‡³ Android 15ï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th>Android ç‰ˆæœ¬</th>
<th>API Level</th>
<th>ä»£å·</th>
<th>å‘å¸ƒæ—¶é—´</th>
</tr>
</thead>
<tbody>
<tr>
<td>Android 15</td>
<td>35</td>
<td>Vanilla Ice Cream</td>
<td>2024å¹´9æœˆ</td>
</tr>
<tr>
<td>Android 14</td>
<td>34</td>
<td>Upside Down Cake</td>
<td>2023å¹´10æœˆ</td>
</tr>
<tr>
<td>Android 13</td>
<td>33</td>
<td>Tiramisu</td>
<td>2022å¹´8æœˆ</td>
</tr>
<tr>
<td>Android 12L</td>
<td>32</td>
<td></td>
<td>2022å¹´3æœˆ</td>
</tr>
<tr>
<td>Android 12</td>
<td>31</td>
<td>Snow Cone</td>
<td>2021å¹´10æœˆ</td>
</tr>
<tr>
<td>Android 11</td>
<td>30</td>
<td>Red Velvet Cake</td>
<td>2020å¹´9æœˆ</td>
</tr>
<tr>
<td>Android 10</td>
<td>29</td>
<td>Q</td>
<td>2019å¹´9æœˆ</td>
</tr>
<tr>
<td>Android 9</td>
<td>28</td>
<td>Pie</td>
<td>2018å¹´8æœˆ</td>
</tr>
<tr>
<td>Android 8.1</td>
<td>27</td>
<td>Oreo</td>
<td>2017å¹´12æœˆ</td>
</tr>
<tr>
<td>Android 8.0</td>
<td>26</td>
<td>Oreo</td>
<td>2017å¹´8æœˆ</td>
</tr>
<tr>
<td>Android 7.1</td>
<td>25</td>
<td>Nougat</td>
<td>2016å¹´10æœˆ</td>
</tr>
<tr>
<td>Android 7.0</td>
<td>24</td>
<td>Nougat</td>
<td>2016å¹´8æœˆ</td>
</tr>
<tr>
<td>Android 6.0</td>
<td>23</td>
<td>Marshmallow</td>
<td>2015å¹´10æœˆ</td>
</tr>
<tr>
<td>Android 5.1</td>
<td>22</td>
<td>Lollipop</td>
<td>2015å¹´3æœˆ</td>
</tr>
<tr>
<td>Android 5.0</td>
<td>21</td>
<td>Lollipop</td>
<td>2014å¹´11æœˆ</td>
</tr>
</tbody>
</table>
<h1 id="è·å–-apk-å®‰è£…è·¯å¾„">è·å– apk å®‰è£…è·¯å¾„</h1>
<p>è·å–æŒ‡å®šåŒ…åçš„ APK è·¯å¾„</p>
<pre tabindex="0"><code>adb shell pm path com.shizhuang.duapp

package:/data/app/com.shizhuang.duapp-fTxemmnM8l6298xbBELksQ==/base.apk
</code></pre><p>å°† APK æ–‡ä»¶æ‹‰å–åˆ°æœ¬åœ°</p>
<pre tabindex="0"><code>adb pull /data/app/com.shizhuang.duapp-fTxemmnM8l6298xbBELksQ==/base.apk
</code></pre><h1 id="è·å–-activity-ä¿¡æ¯">è·å– Activity ä¿¡æ¯</h1>
<p>è¿›å…¥ adb shell</p>
<pre tabindex="0"><code># è·å–è®¾å¤‡ä¸Šå½“å‰è¿è¡Œçš„ Activity
dumpsys activity activities | grep &#34;mResumedActivity&#34;

# è·å–æ´»åŠ¨æ ˆä¸­çš„æ‰€æœ‰ Activityï¼Œå¹¶ä»ä¸­æå–å‡ºæœ€è¿‘çš„ 5 ä¸ª Activity
dumpsys activity activities | grep &#34;Hist #&#34; | head -n 5
</code></pre><h1 id="è·å–å½“å‰åº”ç”¨åŒ…å">è·å–å½“å‰åº”ç”¨åŒ…å</h1>
<p>Mac/Linuxï¼š</p>
<pre tabindex="0"><code>adb shell dumpsys activity activities | grep &#34;mResumedActivity&#34;
</code></pre><p>Windowsï¼š</p>
<pre tabindex="0"><code>adb shell dumpsys activity activities | findstr &#34;mResumedActivity&#34;
</code></pre><p>è°ƒç”¨å®ä¾‹ï¼š</p>
<pre tabindex="0"><code>(base) PS D:\test&gt; adb shell dumpsys activity activities | findstr &#34;mResumedActivity&#34;
    mResumedActivity: ActivityRecord{b40059e u0 com.shizhuang.duapp/.du_login.optimize.LoginContainerActivityV2 t110}
</code></pre><p>å…¶ä¸­ com.shizhuang.duapp å°±æ˜¯å½“å‰åº”ç”¨çš„åŒ…å</p>
<h1 id="è·å–è¿›ç¨‹ä¿¡æ¯">è·å–è¿›ç¨‹ä¿¡æ¯</h1>
<pre tabindex="0"><code># æ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯ã€CPUã€å†…å­˜ä½¿ç”¨ç‡ç­‰
top

# åˆ—å‡ºå½“å‰æ‰€æœ‰è¿›ç¨‹
ps -A

# åˆ—å‡ºåç§°åŒ…å« fs çš„è¿›ç¨‹
ps -A | grep fs

# è·å– 1234 ç«¯å£è¿›ç¨‹çš„ pid
lsof | grep 1234

# æ ¹æ®åŒ…åè·å– pid
pidof com.shizhuang.duapp

# æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€(å¦‚æœ TracerPid&gt;0 è¡¨ç¤ºè¢«è°ƒè¯•çŠ¶æ€ï¼ŒTracerPid å°±æ˜¯è·Ÿè¸ªè°ƒè¯•çš„ è¿›ç¨‹id)
cat /proc/pid/status
</code></pre><h1 id="è¿›ç¨‹ç®¡ç†">è¿›ç¨‹ç®¡ç†</h1>
<pre tabindex="0"><code># åœæ­¢æŒ‡å®šè¿›ç¨‹ 
kill pid

# å¼ºåˆ¶åœæ­¢æŒ‡å®šè¿›ç¨‹
kill -9 pid

# æš‚åœè¿›ç¨‹
kill -19 pid

# ç»§ç»­è¿›ç¨‹
kill -18 pid
</code></pre><h1 id="æ–‡ä»¶ç®¡ç†">æ–‡ä»¶ç®¡ç†</h1>
<pre tabindex="0"><code># æ‹‰å–æ–‡ä»¶/ç›®å½•åˆ°æœ¬åœ°
adb pull /data/app/com.shizhuang.duapp-fTxemmnM8l6298xbBELksQ== D:\temp

# ä½¿ç”¨catå‘½ä»¤æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹
cat filename.txt

# å½“ç›®å½•ä¸å­˜åœ¨è‡ªåŠ¨åˆ›å»ºç›®å½•
mkdir -p /sdcard/dump_dex

# å¤åˆ¶æ–‡ä»¶ï¼ˆç›®å½•å¿…é¡»å­˜åœ¨ï¼‰
cp /data/data/com.shizhuang.duapp/8681372.dex /sdcard/dump_dex

# å¤åˆ¶æ–‡ä»¶å¹¶è‡ªåŠ¨åˆ›å»ºç›®å½•
mkdir -p /sdcard/dump_dex &amp;&amp; cp /data/data/com.shizhuang.duapp/8681372.dex /sdcard/dump_dex/

# ç§»åŠ¨æ–‡ä»¶
mv /data/data/com.shizhuang.duapp/8681372.dex /sdcard/dump_dex
</code></pre><h1 id="åˆ é™¤æ–‡ä»¶ç›®å½•">åˆ é™¤æ–‡ä»¶/ç›®å½•</h1>
<p>åˆ é™¤å•ä¸ªæ–‡ä»¶ï¼š</p>
<pre tabindex="0"><code>rm file.txt
</code></pre><p>åˆ é™¤å¤šä¸ªæ–‡ä»¶ï¼š</p>
<pre tabindex="0"><code>rm file1.txt file2.log
</code></pre><p>åˆ é™¤æ‰€æœ‰ txt æ–‡ä»¶</p>
<pre tabindex="0"><code>rm mydir/*.txt
</code></pre><p>åˆ é™¤ç©ºç›®å½•ï¼ˆåªèƒ½åˆ é™¤ç©ºç›®å½•ï¼‰ï¼š</p>
<pre tabindex="0"><code>rmdir mydir/
</code></pre><p>åˆ é™¤æ•´ä¸ªç›®å½•åŠå…¶å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<pre tabindex="0"><code>rm -r mydir
</code></pre><p>å¦‚æœä½ æƒ³æ›´å®‰å…¨äº›ï¼Œå¯ä»¥åŠ  -iï¼Œé€ä¸ªç¡®è®¤ï¼š</p>
<pre tabindex="0"><code>rm -ri mydir
</code></pre><p>å¦‚æœä½ è¦å¼ºåˆ¶åˆ é™¤ï¼Œä¸æ˜¾ç¤ºä»»ä½•æç¤ºï¼Œå¯ä»¥ç”¨ï¼š</p>
<pre tabindex="0"><code>rm -rf mydir
</code></pre><h1 id="æŸ¥æ‰¾æ–‡ä»¶ç›®å½•">æŸ¥æ‰¾æ–‡ä»¶/ç›®å½•</h1>
<p>æŸ¥æ‰¾ /data è·¯å¾„ä¸‹æ‰€æœ‰åå­—åŒ…å« com.cyrus.example çš„æ–‡ä»¶æˆ–ç›®å½•</p>
<pre tabindex="0"><code> find /data -iname &#39;*com.cyrus.example*&#39;
</code></pre><h1 id="æŸ¥æ‰¾åŒ…å«æŒ‡å®šå†…å®¹çš„æ–‡ä»¶">æŸ¥æ‰¾åŒ…å«æŒ‡å®šå†…å®¹çš„æ–‡ä»¶</h1>
<pre tabindex="0"><code>grep -rl &#34;å…³é”®å­—&#34; .
</code></pre><p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>
<p>grep: æ–‡æœ¬æœç´¢å·¥å…·</p>
</li>
<li>
<p>-r: é€’å½’æŸ¥æ‰¾ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</p>
</li>
<li>
<p>-l: åªè¾“å‡ºåŒ¹é…çš„æ–‡ä»¶åï¼ˆä¸è¾“å‡ºåŒ¹é…å†…å®¹ï¼‰</p>
</li>
<li>
<p>&ldquo;å…³é”®å­—&rdquo;: ä½ è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²</p>
</li>
<li>
<p>.: å½“å‰ç›®å½•</p>
</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre tabindex="0"><code>wayne:/data/data/com.cyrus.example/cyrus # grep -rl &#34;ba0.g&#34; .
./1437648_class_list_execute.txt
./1437648_class_list.txt
./1437648_ins_12347.bin
./1437648_ins_13638.bin
</code></pre><p>å¦‚éœ€è¿‡æ»¤ç‰¹å®šæ–‡ä»¶ç±»å‹ï¼ˆä¾‹å¦‚åªæŸ¥ .txtï¼‰ï¼š</p>
<pre tabindex="0"><code>wayne:/data/data/com.cyrus.example/cyrus # grep -r &#34;ba0.g&#34; *.txt
1437648_class_list.txt:Lba0/g;
1437648_class_list_execute.txt:Lba0/g;
</code></pre><h1 id="æŸ¥çœ‹æ–‡ä»¶è¯¦ç»†ä¿¡æ¯">æŸ¥çœ‹æ–‡ä»¶è¯¦ç»†ä¿¡æ¯</h1>
<p>é€šè¿‡ adb shell è¿›å…¥å‘½ä»¤è¡Œé€šè¿‡ ls -alh æŸ¥çœ‹å½“å‰è·¯å¾„ä¸‹æ‰€æœ‰æ–‡ä»¶ã€‚</p>
<pre tabindex="0"><code>wayne:/sdcard # ls -alh
total 32M
drwxrwx--x 15 root sdcard_rw 3.4K 2024-09-23 17:52 .
drwx--x--x  3 root sdcard_rw 3.4K 2024-09-16 18:43 ..
-rw-rw----  1 root sdcard_rw   88 2024-09-18 12:03 .thumbcache_idx_001
drwxrwx--x  2 root sdcard_rw 3.4K 2024-09-16 18:43 Alarms
drwxrwx--x  5 root sdcard_rw 3.4K 2024-09-18 00:25 Android
</code></pre><p>é€šè¿‡ stat å‘½ä»¤æŸ¥çœ‹æ›´åŠ è¯¦ç»†çš„æ–‡ä»¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬è®¿é—®æ—¶é—´ã€ä¿®æ”¹æ—¶é—´ã€æ–‡ä»¶ç±»å‹å’Œ inode å·ç­‰ã€‚</p>
<pre tabindex="0"><code>wayne:/sdcard # stat /sdcard/Android
  File: /sdcard/Android
  Size: 3488     Blocks: 7       IO Blocks: 512 directory
Device: 1ch/28d  Inode: 2999     Links: 5
Access: (0771/drwxrwx--x)       Uid: (    0/    root)   Gid: ( 1015/sdcard_rw)
Access: 2024-09-16 18:43:38.453334673 +0800
Modify: 2024-09-18 00:25:03.481711645 +0800
Change: 2024-09-18 00:25:03.481711645 +0800
</code></pre><p>é€šè¿‡ file å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶ç±»å‹</p>
<pre tabindex="0"><code>wayne:/sdcard # file Magisk-v27.0.apk
Magisk-v27.0.apk: Zip archive data
</code></pre><p>head ç”¨äºæŸ¥çœ‹æ–‡æœ¬æ–‡ä»¶çš„å‰å‡ è¡Œå†…å®¹ï¼Œé»˜è®¤æ˜¯å‰ 10 è¡Œã€‚</p>
<pre tabindex="0"><code>wayne:/sdcard # head /proc/cpuinfo
Processor       : AArch64 Processor rev 4 (aarch64)
processor       : 0
BogoMIPS        : 38.00
Features        : fp asimd evtstrm aes pmull sha1 sha2 crc32
CPU implementer : 0x51
CPU architecture: 8
CPU variant     : 0xa
CPU part        : 0x801
CPU revision    : 4
</code></pre><p>-n &lt;è¡Œæ•°&gt;ï¼šæŒ‡å®šè¦æ˜¾ç¤ºçš„è¡Œæ•°ã€‚</p>
<pre tabindex="0"><code>wayne:/sdcard # head -n 5 /system/build.prop

# begin common build properties
# autogenerated by build/make/tools/buildinfo_common.sh
ro.system.build.date=Mon Sep 16 18:43:25 CST 2024
ro.system.build.date.utc=1726483405
</code></pre><h1 id="ç¼–è¾‘æ–‡ä»¶">ç¼–è¾‘æ–‡ä»¶</h1>
<p>ç¼–è¾‘æ–‡ä»¶</p>
<pre tabindex="0"><code>vim a.log
</code></pre><p>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œvim ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ã€‚</p>
<p>æ‰“å¼€åï¼Œä½ é»˜è®¤å¤„äº â€œæ™®é€šæ¨¡å¼â€ ï¼Œæ­¤æ—¶æŒ‰ï¼š</p>
<pre tabindex="0"><code>i
</code></pre><p>æ­¤æ—¶å±å¹•å·¦ä¸‹è§’ä¼šæ˜¾ç¤º &ndash; INSERT &ndash;ï¼Œè¡¨ç¤ºä½ ç°åœ¨å¯ä»¥å¼€å§‹è¾“å…¥å†…å®¹ã€‚</p>
<p>æŒ‰ä¸‹ Esc é”®å³å¯é€€å‡ºæ’å…¥æ¨¡å¼ï¼Œå›åˆ°æ™®é€šæ¨¡å¼ã€‚</p>
<p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤é€€å‡º vim</p>
<pre tabindex="0"><code>:wq   â†µ   # ä¿å­˜å¹¶é€€å‡º
:q!   â†µ   # ä¸ä¿å­˜ç›´æ¥é€€å‡º
</code></pre><p>å…¶ä»–å¸¸ç”¨å‘½ä»¤ï¼š</p>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>å‘½ä»¤ï¼ˆæ™®é€šæ¨¡å¼ï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ’å…¥ï¼ˆå…‰æ ‡å‰ï¼‰</td>
<td>i</td>
</tr>
<tr>
<td>æ’å…¥ï¼ˆæ–°è¡Œï¼‰</td>
<td>o</td>
</tr>
<tr>
<td>åˆ é™¤æ•´è¡Œ</td>
<td>dd</td>
</tr>
<tr>
<td>æ’¤é”€</td>
<td>u</td>
</tr>
<tr>
<td>ä¿å­˜ä½†ä¸é€€å‡º</td>
<td>:w + Enter</td>
</tr>
<tr>
<td>ä¸ä¿å­˜å¼ºåˆ¶é€€å‡º</td>
<td>:q! + Enter</td>
</tr>
<tr>
<td>ç§»åŠ¨å…‰æ ‡ä¸Šä¸‹å·¦å³</td>
<td>ä½¿ç”¨æ–¹å‘é”®æˆ– h j k l</td>
</tr>
</tbody>
</table>
<h1 id="æˆªå›¾">æˆªå›¾</h1>
<pre tabindex="0"><code># æˆªå›¾
adb shell screencap /sdcard/screenshot.png
# å°†æˆªå›¾ä»è®¾å¤‡å¤åˆ¶åˆ°ç”µè„‘
adb pull /sdcard/screenshot.png
# åˆ é™¤è®¾å¤‡ä¸­çš„æˆªå›¾æ–‡ä»¶
adb shell rm /sdcard/screenshot.png
</code></pre><h1 id="logcat">Logcat</h1>
<h2 id="1-è¿‡æ»¤å‡º-error-æ—¥å¿—eçº§åˆ«">1. è¿‡æ»¤å‡º Error æ—¥å¿—ï¼ˆEçº§åˆ«ï¼‰</h2>
<pre tabindex="0"><code>adb logcat *:E
</code></pre><p>æ—¥å¿—ä¼˜å…ˆçº§ä»ä½åˆ°é«˜ä¾æ¬¡ä¸ºï¼š</p>
<ul>
<li>
<p>V - Verbose</p>
</li>
<li>
<p>D - Debug</p>
</li>
<li>
<p>I - Info</p>
</li>
<li>
<p>W - Warn</p>
</li>
<li>
<p>E - Error</p>
</li>
<li>
<p>F - Fatal</p>
</li>
<li>
<p>S - Silent (å±è”½æ‰€æœ‰æ—¥å¿—)</p>
</li>
</ul>
<h2 id="2-è¿‡æ»¤æŒ‡å®šåŒ…åçš„æ—¥å¿—">2. è¿‡æ»¤æŒ‡å®šåŒ…åçš„æ—¥å¿—</h2>
<p>å…ˆå¯åŠ¨app å†æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p>
<pre tabindex="0"><code>adb logcat --pid=$(adb shell pidof com.cyrus.example)
</code></pre><h2 id="3-è¿‡æ»¤åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„æ—¥å¿—">3. è¿‡æ»¤åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„æ—¥å¿—</h2>
<p>linux / macï¼š</p>
<pre tabindex="0"><code>adb logcat | grep &#34;å…³é”®å­—&#34;
</code></pre><p>windowsï¼š</p>
<pre tabindex="0"><code>adb logcat | Select-String &#34;å…³é”®å­—&#34;
</code></pre><h2 id="4-æŒ‰-tag-å’Œ-level-è¿‡æ»¤">4. æŒ‰ Tag å’Œ Level è¿‡æ»¤</h2>
<pre tabindex="0"><code>adb logcat System.err:D *:S
</code></pre><p>è¡¨ç¤ºåªæ˜¾ç¤º System.err çš„ Debug æ—¥å¿—ï¼Œå…¶ä»– tag çš„éƒ½ä¸æ˜¾ç¤ºã€‚</p>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>
<p>ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®š System.err:Dï¼Œè®¾ç½®è¯¥ tag æ—¥å¿—çº§åˆ«ä¸º Dï¼ˆDebugï¼‰</p>
</li>
<li>
<p>ç¬¬äºŒä¸ªå‚æ•° *:S æŠŠå…¶ä»–æ‰€æœ‰ tag çš„æ—¥å¿—è®¾ä¸º Silent</p>
</li>
</ul>
<h2 id="5-æ¸…ç©ºæ—¥å¿—ç¼“å­˜">5. æ¸…ç©ºæ—¥å¿—ç¼“å­˜</h2>
<pre tabindex="0"><code>adb logcat -c
</code></pre><h2 id="6-è¾“å‡ºæ—¥å¿—åˆ°æ–‡ä»¶">6. è¾“å‡ºæ—¥å¿—åˆ°æ–‡ä»¶</h2>
<pre tabindex="0"><code>adb logcat -v time &gt; logcat.txt
</code></pre><ul>
<li>
<p>-v timeï¼šæ˜¾ç¤ºæ—¶é—´æˆ³ï¼ˆè¿˜æœ‰ brief, process, tag, raw, threadtime, longï¼‰</p>
</li>
<li>
<p>è¾“å‡ºä¿å­˜åˆ°æ–‡ä»¶ä¸­</p>
</li>
</ul>
<h2 id="7-ç»“åˆå¤šç§è¿‡æ»¤æ–¹å¼">7. ç»“åˆå¤šç§è¿‡æ»¤æ–¹å¼</h2>
<p>ä¸¾ä¾‹ï¼šè¿‡æ»¤åŒ…åä¸º com.cyrus.example çš„ Error çº§åˆ«æ—¥å¿—ï¼Œå¹¶åŒ…å«å­—ç¬¦ä¸² Exceptionï¼š</p>
<pre tabindex="0"><code>adb logcat --pid=$(adb shell pidof com.cyrus.example) *:E | grep &#34;Exception&#34;
</code></pre><p>windowsï¼š</p>
<pre tabindex="0"><code>adb logcat --pid=$(adb shell pidof com.cyrus.example) *:E | Select-String &#34;Exception&#34;
</code></pre><h1 id="procselfmaps">/proc/self/maps</h1>
<p>/proc/self/maps æ˜¯ Linuxï¼ˆå« Androidï¼‰ç³»ç»Ÿä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„ä¼ªæ–‡ä»¶ï¼Œå®ƒæä¾›äº†å½“å‰è¿›ç¨‹å†…å­˜æ˜ å°„ï¼ˆmemory mappingï¼‰ä¿¡æ¯ï¼Œæ˜¯åˆ†æå½“å‰è¿›ç¨‹åŠ è½½äº†å“ªäº›èµ„æºçš„é‡è¦çª—å£ã€‚</p>
<p>åŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>åŠ è½½çš„ .so åŠ¨æ€åº“</p>
</li>
<li>
<p>åŠ è½½çš„ .dex æ–‡ä»¶ï¼ˆåŒ…å« ODEX / VDEXï¼‰</p>
</li>
<li>
<p>æ˜ å°„çš„ Java å †ã€native å †ã€stack ç­‰</p>
</li>
<li>
<p>åŒ¿å mmap å†…å­˜åŒºåŸŸ</p>
</li>
<li>
<p>JIT ç¼–è¯‘ç”Ÿæˆçš„ä»£ç æ®µ</p>
</li>
<li>
<p>æ˜ å°„çš„ /system/, /data/, /apex/, /dev/ashmem ç­‰æ–‡ä»¶</p>
</li>
</ul>
<p>è¿›å…¥ adb shell æ‰§è¡Œä¸‹é¢å‘½ä»¤è¯»å– maps</p>
<pre tabindex="0"><code>cat /proc/$(pidof &lt;packageName&gt;)/maps
</code></pre><p>ç¤ºä¾‹ï¼š</p>
<pre tabindex="0"><code>wayne:/ # cat /proc/$(pidof com.shizhuang.duapp)/maps | grep GameVMP
7b6ae7c000-7b6ae7d000 r--p 0001d000 103:20 19266                         /data/app/com.shizhuang.duapp-fTxemmnM8l6298xbBELksQ==/lib/arm64/libGameVMP.so
7b6ae7d000-7b6ae7f000 rw-p 0001e000 103:20 19266                         /data/app/com.shizhuang.duapp-fTxemmnM8l6298xbBELksQ==/lib/arm64/libGameVMP.so
</code></pre>
  </div>


  <div class="post-footer">

    
    

    
    <hr class="section-divider" />

    <div id="waline"></div>
    <script type="module">
      import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';

      init({
        el: '#waline',
        serverURL: 'https://waline-15wtwfoa7-cyrus-studios-projects.vercel.app',
        path: location.pathname, 
        pageview: true,          
      });
    </script>
  </div>

</article>



<div id="toc" class="toc-container hidden"></div>


<button id="toc-toggle" class="toc-toggle" aria-label="ç›®å½•">
  &#9776;
</button>


<script src="/blog/js/toc.js"></script>



<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
      
      document.querySelectorAll('pre').forEach(function(block) {
          
          var button = document.createElement('button');
          button.className = 'copy-btn';
          button.textContent = 'å¤åˆ¶';

          
          block.appendChild(button);

          
          var clipboard = new ClipboardJS(button, {
              target: function() {
                  return block.querySelector('code');
              }
          });

          
          clipboard.on('success', function(e) {
              e.trigger.textContent = 'å¤åˆ¶æˆåŠŸ';
              setTimeout(function() {
                  e.trigger.textContent = 'å¤åˆ¶';
              }, 2000);
          });

          
          clipboard.on('error', function(e) {
              e.trigger.textContent = 'å¤åˆ¶å¤±è´¥';
          });
      });
  });
</script>



    </main>
  </body>
</html>
